{% load i18n %}
<!-- ko ifnot: loading() -->
<!-- ko ifnot: fileAdded() -->
<div data-bind="dropzone: dropzoneOptions" class="file-select loader-select" style="height: 100%;">
    <div>
        <div class="manifest-manager-main-menu-circle loader-button">
            <span><i style="color: #000" class="fa fa-cloud-upload r-select-icon"></i></span>
        </div> 
        <h2>{% trans 'Upload .csv File' %}</h2>
        <h4>{% trans 'Drag & Drop your file onto this area to upload' %}</h4>
        <div style="display: flex; padding: 15px 25px; flex-direction: column; justify-content: center; align-items: center;">
            <div style="display:flex; flex-direction: column;">
                <div>
                    <div class="dropzone-photo-upload">
                        <div style="border-top: 1px solid #c4c4c4; margin-bottom: 15px;" class="btn btn-rr btn-labeled btn-lg fa fa-image fileinput-button dz-clickable" data-bind="css: uniqueidClass" role="button">
                        {% trans 'Select File' %}
                        </div>
                        <div style="border-top: 1px solid #c4c4c4; margin-bottom: 15px;" class="btn btn-rr btn-labeled btn-lg fa fa-image" data-bind="click: function() { $parent.selectedModule(null) }" role="button">
                            {% trans 'Cancel File Import' %}
                        </div>
                        <div style="min-height: 100%;">
                            <div id="hidden-dz-previews" style="display:none"></div>
                        </div>
                    </div>
                </div>
            </div>
            <h5 class="rr-splash-description">
                {% trans 'Use this workflow to upload a file with data that you want to use to create new data instances of a model.' %}
            </h5>
        </div>
    </div>
</div>
<!-- /ko -->

<!-- ko if: fileAdded() -->
<div style="height: 100%;">
    <div class="etl-module-mapping" style="width: 100%">
        <h3>{% trans "Format: Single .csv File Import" %}</h3>

        <label class="form-checkbox form-normal form-primary" style="padding-left: 25px; padding-top: 3px;">
            <input type="checkbox" data-bind="checked: hasHeaders">{% trans "Column names in the first row" %}
        </label>
        <div class="aher-table">
            <table class="table table-striped" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th>{% trans "Copy From" %}</th>
                        <th>{% trans "Import To" %}</th>
                    </tr>
                </thead>
                <tbody data-bind="dataTablesForEach: { data: headers, dataTableOptions: createTableConfig(2) }">
                    <tr>
                        <td data-bind="text: $data"></td>
                        <td><!--input style="width:30%; display:inline-block;"
                            data-bind="select2Query: {select2Config: select2Config}"-->
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="etl-module-preview" style="width: 100%">
        <h3>{% trans "Data Preview" %}</h3>
        <div class="aher-table">
            <table class="table table-striped" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <!-- ko foreach: headers -->
                        <th data-bind="text: $data"></th>
                        <!-- /ko -->
                    </tr>
                </thead>
                <tbody data-bind="dataTables: { data: csvBody(), dataTableOptions: previewTableConfig }">
                     <tr>
                        <!-- ko foreach: $data -->
                        <td data-bind="text: $data"></td>
                        <!-- /ko -->
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="etl-module-buttons" style="width: 100%">
        <button data-bind="click: function () { fileAdded(false); }" class="btn btn-primary">
            <span>{% trans "Remove File" %}</span>
        </button>
        <button data-bind="click: console.log('format changed')" class="btn btn-primary">
            <span>{% trans "Select a different format" %}</span>
        </button>
        <button data-bind="click: console.log('validated')" class="btn btn-success">
            <span>{% trans "Validate data before import" %}</span>
        </button>
        <button data-bind="click: console.log('imported')" class="btn btn-success">
            <span>{% trans "Import data" %}</span>
        </button>
        <button data-bind="click: function () { $parent.selectedModule(null); }" class="btn btn-danger">
            <span>{% trans "Cancel File Import" %}</span>
        </button>
    </div>
</div>
<!-- /ko -->

<!-- /ko -->