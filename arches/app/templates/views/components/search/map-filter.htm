{% extends "views/components/map.htm" %}
{% load i18n %}

{% block tabs %}
<div class="workbench-card-sidebar-tab" data-bind="click: function() {
    toggleTab('filter');
}, css: {
    'active': activeTab() === 'filter'
}">
    <i class="fa fa-pencil"></i>
    <span class="map-sidebar-text">{% trans "Filter" %}</span>
</div>
{{ block.super }}
{% endblock tabs %}

{% block sidepanel %}
<!--ko if: activeTab() === 'filter' -->
    <div class="workbench-card-sidepanel-header-container">
        <h4 class="workbench-card-sidepanel-header" data-bind="click: hideSidePanel">{% trans "Search by Map" %}</h4>
    </div>

    <div>
        <!-- ko foreach: { data: spatialFilterTypes, as: 'filterType' }-->
       <!--   <button class="" href="#" data-bind="click: function(){$parent.selectEditingTool(filterType.drawMode)}, attr: {'class': filterType.class}, 'text': filterType.title, css: {'active': filterType.active}">
        </button> -->
        <!-- /ko -->

        <!-- <a class="" style="background-position: -342px -2px;" href="#" title='{% trans "Search Map Extent" %}' data-bind="click: searchByExtent, css:{'active': extentSearch}"><span class="sr-only">{% trans "Search Map Extent" %}</span><i class="fa fa-search"></i></a> -->
        <div class="add-new-feature" style="margin-bottom: 4px;">
            <select data-placeholder="{% trans "Select a spatial filter..." %}" data-bind="
                value: drawMode,
                valueAllowUnset: true,
                options: spatialFilterTypes,
                optionsText: 'title',
                optionsValue: 'drawMode',
                chosen: {
                    'width': '100%',
                    'disable_search_threshold': 10,
                    'allow_single_deselect': true
                }
            "></select>
        </div>
        <div class="buffer-control form-control">
            <div class="form-inline">
              <label for="buffer-input">{% trans "Buffer" %}</label>
              <input type="number" min=0.0 id="buffer-input" placeholder="{% trans " buffer " %}" class="buffer-input" data-bind="textInput: buffer">
              <select class="form-control"  data-bind="options: bufferUnits, optionsText:'name', optionsValue:'val', value: bufferUnit"></select>
            </div>
        </div>
    </div>

    <div class="map-card-zoom-tool">
        <a href="javascript:void(0);" data-bind="click: editGeoJSON">
            <i class="fa fa-pencil map-card-feature-edit"></i>
            {% trans "Edit GeoJSON" %}
        </a>
        |
        <a href="javascript:void(0);" data-bind="click: fitToAggregationBounds">
            <i class="fa fa-search map-card-feature-edit"></i>
            {% trans "Zoom to all features" %}
        </a>
        |
        <a href="javascript:void(0);" data-bind="click: clear">
            <i class="fa fa-trash map-card-feature-edit"></i>
            {% trans "Clear spatial filter" %}
        </a>

    </div>

<!--/ko -->
{{ block.super }}
{% endblock sidepanel %}