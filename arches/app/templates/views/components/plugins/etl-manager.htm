{% load i18n %}

<div class="workflow-plugin" style="display: flex; flex-direction: column;">
    <div class="etl-manager-tab-container">
        <div class="etl-manager-tabs">
            <!-- ko foreach: {data: tabs, as: 'tab'} -->
            <!-- <div class="etl-manager-tab" data-bind="click: function(){$parent.activeTab(tab.id)}, css: {active: $parent.activeTab() === tab.id, 'disabled': true}, text: tab.title"></div> -->
            <!-- /ko -->
            <div class="etl-manager-tab" data-bind="click: function(){activeTab('start')}, css: {active: activeTab() === 'start', 'disabled': true}, text: 'Start'"></div>
            <div class="etl-manager-tab" data-bind="click: function(){activeTab('details')}, css: {active: activeTab() === 'details', 'disabled': true}, text: 'Task Details'"></div>
            <div class="etl-manager-tab" data-bind="click: function(){activeTab('import'); fetchLoadEvent()}, css: {active: activeTab() === 'import', 'disabled': true}, text: 'Import Tasks'"></div>
            <div class="etl-manager-tab" data-bind="click: function(){activeTab('export')}, css: {active: activeTab() === 'export', 'disabled': true}, text: 'Export Tasks'"></div>
        </div>
    </div>
    <div data-bind="if: activeTab() === 'start'">
        <div class="etl-manager-filter-container">
            <div class="etl-manager-filter-button" data-bind="click: function() { isImport(true); }, css: {active: isImport() }">Import</div>
            <div class="etl-manager-filter-button" data-bind="click: function() { isImport(false); }, css: {active: !isImport() }">Export</div>
            <input class="etl-manager-filter-input" type="text" placeholder = "Filter Modules..." data-bind="textInput: moduleSearchString">
        </div>
        <!-- ko ifnot: loading() -->
        <div class="workflow-select-plugin">
            <div class="workflow-select-card-container">
                <!-- ko foreach: {data: etlModules, as: 'etlmodule', noChildContext: true} -->
                    <!-- ko if: isImport() && (!moduleSearchString() || !!moduleSearchString() && etlmodule.name.toLowerCase().includes(moduleSearchString().toLowerCase()) ) -->
                    <a href="#" data-bind="if: etlmodule.type === 'import', click: function() { selectModule(etlmodule) }">
                        <div data-bind="style: {'background-color': etlmodule.config.bgColor}" class="workflow-select-card">
                            <h4 class="workflow-select-title" data-bind="text: etlmodule.name"></h4>
                            <div data-bind="style: {'background-color': etlmodule.config.circleColor}" class="workflow-select-wf-circle">
                                <span><i data-bind="attr:{class: ('fa '+etlmodule.icon +' workflow-select-wf-icon')}"></i></span>
                            </div>
                            <p data-bind="text: etlmodule.description" class="workflow-select-desc"></p>
                        </div>
                    </a>
                    <!-- /ko -->
                    <!-- ko if: !isImport() && (!moduleSearchString() || !!moduleSearchString() && etlmodule.name.toLowerCase().includes(moduleSearchString().toLowerCase()) )-->
                    <a href="#" data-bind="if: etlmodule.type === 'export', click: function() { selectModule(etlmodule) }">
                        <div data-bind="style: {'background-color': etlmodule.config.bgColor}" class="workflow-select-card">
                            <h4 class="workflow-select-title" data-bind="text: etlmodule.name"></h4>
                            <div data-bind="style: {'background-color': etlmodule.config.circleColor}" class="workflow-select-wf-circle">
                                <span><i data-bind="attr:{class: ('fa '+etlmodule.icon +' workflow-select-wf-icon')}"></i></span>
                            </div>
                            <p data-bind="text: etlmodule.description" class="workflow-select-desc"></p>
                        </div>
                    </a>
                    <!-- /ko -->
                <!-- /ko -->
            </div>
        </div>
        <!-- /ko -->
    </div>
    <div data-bind="if: activeTab() === 'details'">
        <!-- ko if: selectedModule() -->
        <div style="flex: 1 1 auto;">
            <div class="content-panel">
                <div class="" data-bind="component: {
                    name: selectedModule().componentname,
                    loading: selectedModule().loading,
                    params: selectedModule(),
                }"></div>
            </div>
        </div>
        <!-- /ko -->
    </div>
    <div data-bind="if: activeTab() === 'import'">
        <h1>import</h1>
    </div>
    <div data-bind="if: activeTab() === 'export'">
         <h1>export</h1>
    </div>
</div>