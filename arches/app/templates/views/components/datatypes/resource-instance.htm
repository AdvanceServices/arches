{% load i18n %}
<!-- ko ifnot: $data.search -->
<!--ko let: {self: $data} -->
<div class="node-widget-label concept-label" style="width:650px;">
    <div class="control-label">
        {% trans "Resource Model" %}
    </div>
    <div style="padding-bottom: 10px;">
        <select multiple data-bind="
            disabled: isEditable === false || disabled,
            placeholder: '{% trans "Select a resource model" %}',
            selectedOptions: selectedResourceType,
            options: resourceModels,
            optionsText: 'name',
            chosen: {
                width: '100%'
            }
        "></select>
    </div>
    <div>
        <table class="table table-striped table-bordered" style="margin-bottom: 5px;" cellspacing="0" width="100%">
            <tbody data-bind="foreach: config.graphs">
                <tr>
                    <td data-bind="click: function() { if(self.graphIsSemantic){$data.editing(true)}; }, clickBubble: false, style:{cursor: self.graphIsSemantic ? 'pointer': 'inherit'}" style="cursor: pointer;">
                        <div class="form-horizontal" data-bind="ifnot: $data.editing">
                            <span data-bind="text: self.formatLabel($data.name, $data.ontologyProperty(), $data.inverseOntologyProperty())"></span>
                        </div>
                        <div data-bind="if: $data.editing">
                            <div class="row">
                                <label class="col-sm-12" style="font-weight: bold;">{% trans "Default relationship to" %} <span data-bind="text: $data.name"></span></label>
                            </div>
                            <div class="row">
                                <span class="col-sm-4" style="padding-top: 8px; text-align: right;" data-bind="text: self.node.name() + ' (' + self.makeFriendly(self.node.ontologyclass()) + ')'"></span>
                                <span class="col-sm-4"><input style="width:30%; display:inline-block;" data-bind="
                                    select2Query: {
                                        select2Config: self.getSelect2ConfigForOntologyProperties($data.ontologyProperty, self.node.ontologyclass(), $data.ontologyClass)
                                    }
                                "></span>
                                <span class="col-sm-4" style="padding-top: 8px;" data-bind="text: $data.name + ' (' + self.makeFriendly($data.ontologyClass) + ')'"></span>
                            </div>
                            <div class="row" style="margin-top: 20px;">
                                <label class="col-sm-12" style="font-weight: bold;">{% trans "Default inverse relationship to" %} <span data-bind="text: $data.name"></span></label>
                            </div>
                            <div class="row">
                                <span class="col-sm-4" style="padding-top: 8px; text-align: right;" data-bind="text: $data.name + ' (' + self.makeFriendly($data.ontologyClass) + ')'"></span>
                                <span class="col-sm-4"><input style="width:30%; display:inline-block;" data-bind="
                                    select2Query: {
                                        select2Config: self.getSelect2ConfigForOntologyProperties($data.inverseOntologyProperty, $data.ontologyClass, self.node.ontologyclass())
                                    }
                                "></span>
                                <span class="col-sm-4" style="padding-top: 8px;" data-bind="text: self.node.name() + ' (' + self.makeFriendly(self.node.ontologyclass()) + ')'"></span>
                            </div>
                            <button href="javascript:void(0);" class="btn btn-shim btn-labeled btn-lg fa fa-pencil btn-mint" style="float: right; margin-top:15px;" data-bind="click: function() { $data.editing(false); }, clickBubble: false">
                                {% trans "Done" %}
                            </button>
                        </div>
                    </td>
                    <td style="min-width: 75px; margin-top: 15px;">
                        <a href="javascript:void(0);" data-bind="click: $data.removeRelationship, clickBubble: false">
                            <i class="fa fa-trash map-card-feature-delete"></i>
                            {% trans "Delete" %}
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<!-- /ko -->
<!-- /ko -->

<!-- ko if: $data.search -->
<div class="col-md-4 col-lg-3">
    <select class="resources" data-bind="value: op, chosen: {width: '100%', disable_search_threshold: 15}">
        <option value="">{% trans "References" %}</option>
        <option value="!">{% trans "Does not reference" %}</option>
    </select>
</div>
<div class="col-md-8 col-lg-9 resource-instance-search">
    <!-- ko component: {
        name:  datatype.datatype.includes('list') ? 'resource-instance-multiselect-widget' : 'resource-instance-select-widget', 
        params: {
            config: {
                placeholder: '{% trans "Select a resource" %}'
            },
            label: '',
            value: searchValue,
            node: node,
            disabled: false,
            state: "search",
            state: "form",
            mulitple: !!datatype.datatype.includes('list'),
        }
    } --><!-- /ko -->
</div>
<!-- /ko -->
