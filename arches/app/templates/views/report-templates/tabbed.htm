
{% extends "views/report-templates/default.htm" %}
{% load i18n %}

{% block header %}
<div>
    <ul class="tabbed-report-tab-list">
    <!-- ko if: activeTab  -->
        <!-- ko foreach: {data: tabs, as: 'tab'}  -->
        <li data-bind="click: function(){ $parent.activeTab(tab) }, css: { 'active-report-tab': $parent.activeTab().name() === ko.unwrap(tab.name) }" class="report-tab">
            <a><span><i data-bind="attr: {class: ('fa '+ ko.unwrap(tab.icon))}"></i></span></a>
        </li>
        <!-- /ko -->
    <!-- /ko -->
    </ul>
</div>
<!-- <p data-bind="text: configtabs().length"></p> -->
<div class="tab-banner">
    <div style="display: flex; flex-direction: row">
        <span><i data-bind="class: report.get('iconclass') || 'fa fa-file-o'"></i></span>
        <span style="padding-left: 5px" data-bind="text: report.get('displayname') || '(Resource Instance Name)'"></span>
    </div>
    <!-- ko if: activeTab  -->
    <div><span data-bind="text: activeTab().name()"></span></div>
    <!-- /ko -->
</div>
{% endblock header %}


{% block header_form %}
<div style="display: flex; flex-direction: row">
<div id="card-save-tile-btn" class="install-buttons">
    <button id="" class="btn btn-shim btn-mint btn-labeled btn-md fa fa-plus" data-bind="click: addTab">{% trans "Add Tab" %}</button>
</div>
</div>
<!--ko foreach: {data: tabs, as: 'tab'}-->
<div style="height: 100%; display: flex; flex-direction: column; justify-content: space-evenly; margin: 15px 0px 15px; padding: 5px; background-color: #fff">
    <div style="display: flex; flex-direction: row">
        <div>
            <div class="col-xs-12 pad-nor" style="padding: 5px">
                <input type="" placeholder="{% trans "Tab Name" %}" id="" class="form-control input-md widget-input" data-bind="textInput: tab.name" />
            </div>
            <div class="col-xs-12 pad-nor" style="padding: 5px">
                <input type="" placeholder="{% trans "Tab Icon" %}" id="" class="form-control input-md widget-input" data-bind="textInput: tab.icon" />
            </div>
            <div class="col-xs-12 pad-nor" style="padding: 5px">
                <select class="design" data-placeholder="{% trans "Select cards in this tab" %}" multiple data-bind="selectedOptions: tab.nodegroup_ids, options: $parent.topcards, optionsText: 'name', optionsValue: 'nodegroupid', chosen: {disable_search_threshold: 10, width: '100%'}"></select>
            </div>
        </div>
        <span data-bind="click: function(){$parent.removeTab(tab)}"><i class="fa fa-close"></i></span>
    </div>
</div>
<!--/ko-->
{% endblock header_form %}


{% block body %}

    <!--ko if: hasProvisionalData() && (editorContext === false) -->
    <div class="report-provisional-flag">{% trans 'This resource has provisional edits (not displayed in this report) that are pending review' %}</div>
    <!--/ko-->
    <!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === true) -->
    <div class="report-provisional-flag">{% trans 'This resource has provisional edits (not displayed in this report) that are pending review' %}</div>
    <!--/ko-->
    <!--ko if: hasProvisionalData() && (editorContext === true && report.userisreviewer === false) -->
    <div class="report-provisional-flag">{% trans 'This resource has provisional edits that are pending review' %}</div>
    <!--/ko-->

    <div class="rp-report-section relative rp-report-section-root">
        <div class="rp-report-section-title">
            <!-- ko foreach: { data: activeCards, as: 'card' } -->
                <!-- ko if: $index() !== 0 --><hr class="rp-tile-separator"><!-- /ko -->
                <div class="rp-card-section">
                    <!-- ko component: {
                        name: card.model.cardComponentLookup[card.model.component_id()].componentname,
                        params: {
                            state: 'report',
                            card: card,
                            pageVm: $root
                        }
                    } --> <!-- /ko -->
                </div>
            <!-- /ko -->
        </div>
    </div>

    {% endblock body %}
