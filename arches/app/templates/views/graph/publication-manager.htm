<!--
ARCHES - a program developed to inventory and manage immovable cultural heritage.
Copyright (C) 2013 J. Paul Getty Trust and World Monuments Fund

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.
-->
{% extends "views/graph/graph-base.htm" %}
{% load static %}
{% load template_tags %}
{% load i18n %}

{% block graph_header_title %}
{% trans "Published Graphs Manager" %}
{% endblock graph_header_title %}

{% block graph_header_buttons %}
<span style="display: flex" data-bind="if: dirty">
    <button class="btn btn-sm btn-danger btn-labeled fa fa-trash" data-bind="click: cancel"><span>{% trans "Discard Edits" %}</span></button>
    <button class="btn btn-sm btn-primary btn-labeled fa fa-check" data-bind="click: save"><span>{% trans "Save Edits" %}</span></button>
</span>
{{ block.super }}
{% endblock graph_header_buttons %}

{% block content %}
<div style="padding: 20px; width: 100%;">
    <div style="border-bottom: 1px solid #ddd; padding-bottom: 20px;">
        <h4>{% trans "Select the active published graph:" %}</h4>
    </div>
    
    <div
        style=""
    >
        <fieldset>
            <!-- ko foreach: $data.publishedGraphs() -->
            <div 
                data-bind="
                    attr: { 'class': $data['publicationid'] === $parent.graphPublicationId() ? 'publication active-publication' : 'publication' },
                    click: $parent.foo
                "
            >
                <input 
                    style="margin: 0px; cursor: pointer; pointer-events: none;" 
                    type="radio" 
                    data-bind="
                        checkedValue: $data['publicationid'], 
                        checked: $parent.graphPublicationId(),
                    "
                />
                <!-- ko if: $data['publicationid'] === $parent.graphPublicationIdFromDatabase() -->
                    <span>{% trans '( current active version )' %}</span>
                <!-- /ko -->
                <span data-bind="text: $data['published_time']"></span>
                <span data-bind="text: $data['notes'] || {% quoted_trans 'None' %}"></span>
            </div>
            <!-- /ko -->
        </fieldset>
    </div>
    
    <div data-bind="text: console.log($data)"></div>
</div>

{% endblock content %}

{% block pre_require_js %}
{{block.super}}
<div 
    id="graphPublicationData"
    style="display: none;"
    graphPublicationData='{
        "graphs_x_published_graphs": {{graphs_x_published_graphs}},
        "graph_publication_id": "{{graph_publication_id}}",
    }'
></div>
{% endblock pre_require_js %}
